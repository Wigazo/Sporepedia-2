//Posición: En todas las páginas
$(function() {
    $(function() {
        var testaudio = document.createElement('audio');
        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        if (!window.localStorage || !(testaudio.canPlayType || testaudio.canPlayType('audio/mpeg;').replace(/no/, '')) && !MutationObserver) return;

        if (localStorage.getItem('sonido_notificacion') != 0) {
            var observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (typeof(mutation.addedNodes) != 'undefined' && mutation.addedNodes.length > 0 && /nid=\d+/.test(mutation.addedNodes[0].innerHTML) && !localStorage.getItem(mutation.addedNodes[0].innerHTML.match(/nid=\d+/)[0])) {
                        localStorage.setItem(mutation.addedNodes[0].innerHTML.match(/nid=\d+/)[0], 1);
                        new Audio('data:audio/mp3;base64,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nFLEiXzenUYYAKEdjCGMSo4VkAysO6VFhj9f/0WUGKIOACe///SDIVfd0uRgghOwByGhT6/+fBZt7knYXTbBrbz1sIoGeLWW48VXPBx6igoLQo426IizyhrKUHiCaj4tHE5if/7j485MocDr///zNQoJeGP/+xjESgAI7Mdr4rxJgSAZrPwXnTAyAAh1gDPyX7/zJNR9aFHu6p3+vSr8P4bZBoOn+fRISRwgiMLGDD3ha2vnbUg0cZ/MOle13////iUkKgFFQkDX//6gIAOBkAP5f/9bWYNPHkJXRoe2vfrmVeFiPJPOONYkhE7SrDqZ3cdbufqMf7HtPy/qHw1v/////8L/+xjEP4GI9Mln4L0JkQUY7PQXrTIOAVH4yf///iAgAAA1SAADoAH/DweMq+youOunSuVCc4fCEo5VWeqIKTUYhNzrfmlSAtcoYdm///6HhAE4Jj4jk3///yYQzGABfQB/807Yioa05z3nfcfBjHxl3OXcRIcRX2b6mFnEQMUMEH1///oqB0waKh4W///4LQD/+xjEOIIHXM9joCzpkNQZ7HwFlTAAAAszIAiZAD/9p4IHUEU3SeHUDiYpqqOg6zKayGK+r9HUSQco7uymt///uNhwbs///y4PjyMEpUAD50LVA0aKjA8YqkcgHcKFNs3VWPdPREXzFIg/AKGxw+WNMLW///oWEQAoj///zKoAAAfVpJykAfKiKI62Hx4XmkD/+xjEPgIGpMdf4AzpgNAZLXQCnTb93QKgueIOD3RK+aSRhlolzz82zDyzRuJf/Kgmg0PfICv//UIkQSZAAP//5S1jhzJFLJTMwVASEY5SS2HZ/CCRxM3M/3VrnfyPi0wj/+xQLFgM+GhF//xlAAAEsRSVsAHymoars3mCQKAwcflEiOdzZbUd86noSYOMQiX/+xjERoIGrIlzoB0JcNERK3QDGSodG87f/jAiEBdogU//////+woJFHtUQA/+TqUUjKagarM9/CRev3qtaQSpTlO4DVS22d5iEKQVU/m8r//oYxhiTf//7AfVAAAGzAAGB/3veyQs8MBG7tHfJFhB8MnUnRve+RQhS9CFeqjxILIInN///////////4ykWLH/+xjETwKG2SNroBSrsMYY7TQFiTagUY0AP/cvJMbKpanjoy30bEhFUahm+qvHTXZ5zo7IVx5iKh1ASmL7///4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').play();
                        console.log(mutation.addedNodes);
                    }
                });
            });
            observer.observe($('#live_notif')[0], {
                attributes: true,
                childList: true,
                characterData: true
            });
        }

        if (location.search == "?mode=editprofile&page_profil=preferences") {
            $("form#ucp fieldset:first").prepend('<dl><dt><label>Sonido de notificación : </label></dt> <dd> <label> <input type="radio" name="sonido_notificacion" value="1">Sí</label> <label> <input type="radio" name="sonido_notificacion" value="0">No</label> <br><span class="italic">Esta opción no se guarda en tu perfil, sino en las cookies de tu navegador. Así que si las borrás o usás otro navegador, esta opción estará en su valor por defecto ("Sí").</span> </dd></dl>');
            if (localStorage.getItem('sonido_notificacion') != 0) {
                $("form#ucp input:radio[name ='sonido_notificacion'][value='1']").attr("checked", "checked");
            } else {
                $("form#ucp input:radio[name ='sonido_notificacion'][value='0']").attr("checked", "checked");
            }
            $("form#ucp").submit(function() {
                localStorage.setItem('sonido_notificacion', $("form#ucp input:radio[name ='sonido_notificacion']:checked").val());
                return true;
            });
        }

    })
});